<%- include('particles/header.ejs') %>

<% for (let i = 0; i < items.length; i++) { %>

    <div class="section">
        <a href="/items/<%= items[i].id %>">
            <h2 class="section__title"><%= items[i].title %></h2>
            <img class="section__image" src="img/<%= items[i].image %>">
        </a>
    </div>

<% } %>

<div>
    <button id="get">Fetch</button>
</div>

<div>
    <button id="post">Post</button>
</div>

<%- include('particles/footer.ejs') %>

<script>
    let get = document.querySelector('#get');

    get.addEventListener('click', () => {
        fetch('http://127.0.0.1:8080', {
            method: 'GET'
        })
        .then((response) => { console.log(response); return response.json(); })
        .then((data) => console.log(data));
    });

    let post = document.querySelector('#post');

    post.addEventListener('click', () => {
        fetch('http://127.0.0.1:8080/test', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                value: '8'
            })
        })
        .then((response) => { console.log(response); return response.json(); })
        .then((data) => console.log(data));
    });

    // recursion
    fetch('http://127.0.0.1:8080/paged', {
        method: 'POST',
        // headers: {
        //     'Content-Type': 'application/json',
        // },
        // body: JSON.stringify({
        //     limit: 2,
        //     offset: 2
        // })
    })
    .then((response) => response.json())
    .then((data) => console.log(data));

    // Факториал 
</script>